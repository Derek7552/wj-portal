<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="安全智库详情 - 安全知识库与最佳实践指南">
    <title>知识详情 | 云脑</title>
    <link rel="stylesheet" href="../../css/common.css">
    <link rel="stylesheet" href="../../css/dashboard.css">
    <link rel="stylesheet" href="../css/agent-detail.css">
    <link rel="stylesheet" href="../css/security-knowledge-detail.css">
</head>
<body class="agent-detail-page agent-knowledge-detail-page">
    <!-- 左侧导航栏 - 智能体详情页使用折叠模式 -->
    <aside class="sidebar collapsed" id="sidebar">
        <!-- Logo 区 -->
        <div class="sidebar-logo">
            <a href="../../dashboard.html" class="logo-link" title="云脑">
                <div class="logo-icon">
                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect width="32" height="32" rx="6" fill="#2563EB"/>
                        <path d="M16 8L20 14H12L16 8Z" fill="white"/>
                        <path d="M10 18L14 24H6L10 18Z" fill="white" opacity="0.8"/>
                        <path d="M22 18L26 24H18L22 18Z" fill="white" opacity="0.8"/>
                    </svg>
                </div>
                <h1 class="logo-text">云脑</h1>
            </a>
        </div>

        <!-- 主导航菜单 -->
        <div class="sidebar-content">
            <nav class="sidebar-nav">
                <!-- 首页 - 带收藏快捷入口 -->
                <div class="nav-item-home-wrapper">
                    <a href="../../dashboard.html" class="nav-item nav-item-home" title="首页">
                        <span class="nav-icon">🏠</span>
                        <span class="nav-text">首页</span>
                    </a>
                    <div class="home-menu" id="homeMenu">
                        <a href="../../dashboard.html" class="home-menu-favorite-item">
                            <span class="home-menu-favorite-icon">🏠</span>
                            <span class="home-menu-favorite-name">首页</span>
                        </a>
                        <div class="home-menu-favorites" id="homeMenuFavorites">
                            <div class="home-menu-favorites-empty" id="homeMenuFavoritesEmpty" style="display: none;">
                                <p class="home-menu-empty-text">暂无收藏</p>
                            </div>
                            <div class="home-menu-favorites-list" id="homeMenuFavoritesList"></div>
                        </div>
                    </div>
                </div>
            </nav>

            <!-- 底部导航 -->
            <nav class="sidebar-nav-bottom">
                <a href="../../templates.html" class="nav-item" title="UI模板">
                    <span class="nav-icon">📐</span>
                    <span class="nav-text">UI模板</span>
                </a>

                <a href="#" class="nav-item" title="用户反馈">
                    <span class="nav-icon">💬</span>
                    <span class="nav-text">用户反馈</span>
                </a>

                <a href="#" class="nav-item" title="帮助中心">
                    <span class="nav-icon">❓</span>
                    <span class="nav-text">帮助中心</span>
                </a>

                <div class="nav-item-user-wrapper">
                    <a href="#" class="nav-item nav-item-user" id="userNavItem" title="个人中心">
                        <div class="user-avatar" id="userAvatar">T</div>
                        <span class="user-name" id="userName">测试用户</span>
                    </a>
                    <div class="user-menu" id="userMenu">
                        <a href="#" class="user-menu-item">
                            <span class="nav-icon">👤</span>
                            <span class="nav-text">个人中心</span>
                        </a>
                        <button class="user-menu-item nav-item-logout" id="logoutBtn">
                            <span class="nav-icon">🚪</span>
                            <span class="nav-text">退出登录</span>
                        </button>
                    </div>
                </div>
            </nav>
        </div>
    </aside>

    <!-- 主内容区 -->
    <main class="main-content-area">
        <!-- 智能体信息提示 -->
        <div class="detail-agent-info">
            <span class="agent-name-text">安全智库</span>
            <span class="agent-separator">·</span>
            <span class="agent-type-text">基础类</span>
            <span class="agent-separator">·</span>
            <span class="agent-version-text">v1.0.3</span>
        </div>

        <!-- 返回列表按钮和信息标题 -->
        <div class="detail-title-section">
            <button class="btn-back-to-list" onclick="window.location.href='security-knowledge.html';" title="返回列表">
                <span class="back-icon">←</span>
            </button>
            <h1 class="detail-title-main">Web应用安全开发最佳实践指南</h1>
            <div class="detail-actions">
                <button class="btn-action" id="collectBtn" title="收藏">
                    <span>⭐</span>
                    <span>收藏</span>
                </button>
                <button class="btn-action" title="分享">
                    <span>🔗</span>
                    <span>分享</span>
                </button>
                <button class="btn-action" title="导出">
                    <span>📥</span>
                    <span>导出</span>
                </button>
            </div>
        </div>

        <!-- 主内容容器：左右布局 -->
        <div class="detail-container">
            <!-- 左侧：信息详情 -->
            <div class="detail-content">
                <!-- 详情页头部 -->
                <div class="detail-header">
                    <div class="detail-meta">
                        <span class="meta-item">
                            <span class="meta-icon">📅</span>
                            <span>2024-03-15 14:30</span>
                        </span>
                        <span class="meta-item">
                            <span class="meta-icon">📚</span>
                            <span>OWASP</span>
                        </span>
                        <span class="meta-item">
                            <span class="detail-tag tag-research">最佳实践</span>
                        </span>
                    </div>
                </div>

                <!-- 内容摘要 -->
                <div class="detail-summary">
                    <div class="summary-label">📋 内容摘要</div>
                    <p class="summary-text">本指南详细介绍了Web应用开发过程中的安全最佳实践，包括输入验证、身份认证、会话管理、加密传输等关键安全措施。通过遵循这些实践，开发团队可以构建更安全、更可靠的Web应用，有效防范常见的安全威胁。</p>
                </div>

                <!-- 文章内容 -->
                <article class="detail-article">
                    <h2>一、输入验证与数据清理</h2>
                    <p>输入验证是Web应用安全的第一道防线。所有来自用户或外部系统的输入都必须经过严格的验证和清理，防止注入攻击、XSS攻击等安全威胁。</p>

                    <h3>1.1 输入验证原则</h3>
                    <p>输入验证应遵循以下原则：</p>
                    <ul>
                        <li><strong>白名单验证：</strong>只允许已知安全的字符和格式</li>
                        <li><strong>类型检查：</strong>验证数据类型是否符合预期</li>
                        <li><strong>长度限制：</strong>限制输入的最大长度，防止缓冲区溢出</li>
                        <li><strong>格式验证：</strong>使用正则表达式验证邮箱、URL等格式</li>
                        <li><strong>业务规则验证：</strong>验证输入是否符合业务逻辑要求</li>
                    </ul>

                    <h3>1.2 常见注入攻击防护</h3>
                    <p>针对不同类型的注入攻击，需要采取相应的防护措施：</p>
                    <ul>
                        <li><strong>SQL注入：</strong>使用参数化查询或预编译语句，避免字符串拼接</li>
                        <li><strong>命令注入：</strong>避免直接执行系统命令，使用安全的API替代</li>
                        <li><strong>LDAP注入：</strong>对LDAP查询参数进行转义处理</li>
                        <li><strong>XML注入：</strong>验证和清理XML输入，使用安全的XML解析器</li>
                    </ul>

                    <h2>二、身份认证与授权</h2>
                    <p>身份认证和授权机制是保护Web应用资源的关键。需要建立完善的认证体系，确保只有授权用户才能访问相应的资源。</p>

                    <h3>2.1 密码安全</h3>
                    <p>密码是用户身份认证的基础，需要采取严格的安全措施：</p>
                    <ul>
                        <li>强制使用强密码策略（长度、复杂度要求）</li>
                        <li>使用安全的密码哈希算法（如bcrypt、Argon2）</li>
                        <li>实施密码加密存储，避免明文存储</li>
                        <li>提供密码重置功能，使用安全的验证机制</li>
                        <li>实施账户锁定机制，防止暴力破解</li>
                    </ul>

                    <h3>2.2 会话管理</h3>
                    <p>会话管理是维护用户状态的关键，需要确保会话的安全性：</p>
                    <ul>
                        <li>使用安全的会话ID生成算法（随机、不可预测）</li>
                        <li>实施会话超时机制，自动注销长时间未活动的会话</li>
                        <li>使用HTTPS传输会话令牌，防止中间人攻击</li>
                        <li>实施会话固定攻击防护</li>
                        <li>在用户登出时立即销毁会话</li>
                    </ul>

                    <h3>2.3 多因素认证（MFA）</h3>
                    <p>对于敏感操作，应实施多因素认证：</p>
                    <ul>
                        <li>结合密码、短信验证码、硬件令牌等多种认证方式</li>
                        <li>使用时间同步令牌（TOTP）或推送通知</li>
                        <li>实施生物识别认证（指纹、面部识别等）</li>
                    </ul>

                    <h2>三、数据加密与传输安全</h2>
                    <p>数据加密是保护敏感信息的重要手段，需要在存储和传输两个层面实施加密。</p>

                    <h3>3.1 传输层加密</h3>
                    <ul>
                        <li>强制使用HTTPS协议，使用TLS 1.2或更高版本</li>
                        <li>实施HSTS（HTTP严格传输安全）策略</li>
                        <li>使用强加密套件，禁用弱加密算法</li>
                        <li>正确配置SSL/TLS证书，定期更新</li>
                    </ul>

                    <h3>3.2 数据存储加密</h3>
                    <ul>
                        <li>对敏感数据（如密码、个人信息）进行加密存储</li>
                        <li>使用强加密算法（AES-256等）</li>
                        <li>安全管理加密密钥，使用密钥管理系统</li>
                        <li>实施数据脱敏，减少敏感数据暴露风险</li>
                    </ul>

                    <h2>四、错误处理与日志记录</h2>
                    <p>完善的错误处理和日志记录机制有助于及时发现和处理安全事件。</p>

                    <h3>4.1 安全错误处理</h3>
                    <ul>
                        <li>避免向用户暴露详细的错误信息（如堆栈跟踪、数据库错误）</li>
                        <li>使用通用的错误消息，避免泄露系统内部信息</li>
                        <li>记录详细的错误日志供管理员分析</li>
                        <li>实施错误监控和告警机制</li>
                    </ul>

                    <h3>4.2 安全日志记录</h3>
                    <ul>
                        <li>记录所有安全相关事件（登录、权限变更、敏感操作等）</li>
                        <li>保护日志文件，防止未授权访问和篡改</li>
                        <li>实施日志集中管理和分析</li>
                        <li>定期审查日志，发现异常行为</li>
                    </ul>

                    <h2>五、安全开发流程</h2>
                    <p>将安全融入开发流程的各个环节，实现安全左移。</p>

                    <h3>5.1 安全需求分析</h3>
                    <ul>
                        <li>在需求阶段识别安全需求</li>
                        <li>进行威胁建模，识别潜在安全威胁</li>
                        <li>制定安全设计规范</li>
                    </ul>

                    <h3>5.2 安全代码审查</h3>
                    <ul>
                        <li>实施代码审查流程，检查安全漏洞</li>
                        <li>使用静态代码分析工具（SAST）</li>
                        <li>进行安全测试，包括渗透测试</li>
                    </ul>

                    <h3>5.3 持续安全改进</h3>
                    <ul>
                        <li>定期进行安全评估和审计</li>
                        <li>关注安全漏洞公告，及时修复</li>
                        <li>持续更新安全知识和技能</li>
                    </ul>

                    <h2>六、总结</h2>
                    <p>Web应用安全是一个持续的过程，需要开发团队在开发、测试、部署和运维的各个环节都重视安全。通过遵循本指南中的最佳实践，可以有效提升Web应用的安全性，保护用户数据和系统资源。建议开发团队根据自身业务特点，制定详细的安全开发规范和流程，并定期进行安全培训和评估。</p>
                </article>

                <!-- 相关推荐 -->
                <div class="detail-related">
                    <h3 class="related-title">📚 相关推荐</h3>
                    <div class="related-list">
                        <a href="security-knowledge-detail.html?id=2" class="related-item">
                            <span class="related-icon">📄</span>
                            <span class="related-text">零信任架构实施技术指南</span>
                        </a>
                        <a href="security-knowledge-detail.html?id=3" class="related-item">
                            <span class="related-icon">📄</span>
                            <span class="related-text">ISO 27001信息安全管理体系实施规范</span>
                        </a>
                        <a href="security-knowledge-detail.html?id=4" class="related-item">
                            <span class="related-icon">📄</span>
                            <span class="related-text">API安全防护方案与实践</span>
                        </a>
                    </div>
                </div>
            </div>

            <!-- 右侧：对话区域 -->
            <div class="detail-chat">
                <div class="chat-container">
                    <!-- 对话头部 -->
                    <div class="chat-header">
                        <div class="chat-header-main">
                            <span class="chat-icon">🤖</span>
                            <span class="chat-title">AI 智能助手</span>
                        </div>
                        <button class="btn-icon" id="clearChat" title="清空对话">
                            🗑️
                        </button>
                    </div>

                    <!-- 对话消息区域 -->
                    <div class="chat-messages" id="chatMessages">
                        <!-- 欢迎消息 -->
                        <div class="message message-ai">
                            <div class="message-avatar">🤖</div>
                            <div class="message-content">
                                <div class="message-time">2024-12-09 15:20</div>
                                <div class="message-bubble">
                                    <p>您好！我是AI智能助手，我可以帮助您深入理解这篇安全知识文档。</p>
                                    <p>您可以向我提问关于文档的任何问题，例如：</p>
                                    <ul>
                                        <li>如何实施输入验证？</li>
                                        <li>会话管理的最佳实践是什么？</li>
                                        <li>如何选择加密算法？</li>
                                        <li>安全开发流程如何实施？</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 输入区域 -->
                    <div class="chat-input-container">
                        <div class="chat-input-wrapper">
                            <textarea
                                class="chat-input"
                                id="chatInput"
                                placeholder="向AI提问关于这篇知识文档的问题..."
                                rows="3"
                            ></textarea>
                            <div class="chat-input-toolbar">
                                <div class="chat-input-actions">
                                    <button class="btn-icon" title="上传文件">📎</button>
                                    <button class="btn-icon" title="插入图片">🖼️</button>
                                </div>
                                <button class="btn btn-primary chat-send" id="chatSend">
                                    <span>发送</span>
                                    <span class="send-shortcut">Shift+Enter</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="../../js/dashboard.js"></script>
    <script src="../js/security-knowledge-detail.js"></script>
</body>
</html>
