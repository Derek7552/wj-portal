# 智能体详情侧导航功能说明

## 📋 功能概述

智能体详情页面的侧导航包含"新对话"按钮和"近期任务"列表：
- **新对话按钮**：位于侧导航顶部，点击创建新对话
- **近期任务列表**：直接显示近十条任务记录，用户可以快速浏览任务列表，点击任意任务直接跳转到全部任务记录页

## 🎯 功能特性

### 1. 新对话按钮

**显示位置**：侧导航最顶部
**视觉设计**：
- 渐变紫色背景（从 #667eea 到 #764ba2）
- ✨ 图标 + "新对话" 文字
- 悬停时有上浮动画效果
- 带阴影，凸显重要性

**交互逻辑**：
- 点击跳转到空状态页面（agent-detail-empty.html）
- 悬停时按钮上浮2px，阴影加深
- 点击时按钮下沉，阴影减弱

### 2. 近期任务列表

**显示位置**：在"新对话"按钮下方
- **无需交互**：打开页面即可看到，无需点击或悬停
- **始终可见**：在桌面端保持展开状态

**任务条目**（近十条）：
- **状态图标**：清晰的emoji图标
  - ⏳ 沙漏：进行中任务
  - ✅ 对勾：已完成任务
  - ❌ 叉号：异常终止任务
- **任务名称**：13px字体，超长自动省略显示

**快捷入口**：
- "查看全部任务记录 →" 链接
- 浅蓝色背景，悬停时高亮
- 点击跳转到全部任务记录页面

### 3. 交互逻辑

**新对话按钮**：
- ✅ 点击按钮 → 跳转到空状态页（agent-detail-empty.html）
- ✅ 悬停时上浮动画 + 阴影加深
- ✅ 点击时下沉效果

**任务列表**：
- ✅ 点击任务项 → 跳转到全部任务记录页（agent-detail-tasks.html）
- ✅ 点击"查看全部任务记录" → 跳转到全部任务记录页
- ✅ 悬停任务项 → 浅灰色背景高亮

**滚动行为**：
- 列表最大高度400px
- 超过十条时显示滚动条
- 4px宽的细滚动条，灰色半透明

## 🎨 视觉设计

### 颜色方案

**新对话按钮**：

| 元素 | 颜色 | 说明 |
|------|------|------|
| 按钮背景 | 渐变：`#4f46e5` → `#7c3aed` | 亮紫/蓝紫渐变 |
| 悬停背景 | 渐变：`#6366f1` → `#8b5cf6` | 悬停时更亮 |
| 按钮文字 | `#FFFFFF` | 纯白色 |
| 文字阴影 | `0 1px 3px rgba(0, 0, 0, 0.3)` | 深色阴影，增强可读性 |
| 按钮阴影 | `rgba(79, 70, 229, 0.4)` | 半透明紫色 |
| 悬停阴影 | `rgba(79, 70, 229, 0.5)` | 悬停时阴影加深 |

**任务列表**：

| 元素 | 颜色 | 说明 |
|------|------|------|
| 状态图标 | Emoji原生色 | ⏳/✅/❌ 系统emoji |
| 任务名称 | `#262626` | 深灰色 |
| 悬停背景 | `#F5F5F5` | 浅灰色 |
| 快捷入口背景 | `#F0F7FF` | 浅蓝色 |
| 快捷入口悬停 | `#E6F4FF` | 深蓝色 |

### 尺寸规格

```css
新对话按钮:
  宽度: calc(100% - 32px)
  外边距: 0 16px 16px 16px
  内边距: 12px 16px
  边框圆角: 8px
  字体大小: 14px
  字重: 700
  字母间距: 0.3px
  图标大小: 18px
  背景: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%)
  悬停背景: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)
  文字阴影: 0 1px 3px rgba(0, 0, 0, 0.3)
  按钮阴影: 0 4px 12px rgba(79, 70, 229, 0.4)
  悬停阴影: 0 6px 16px rgba(79, 70, 229, 0.5)
  悬停位移: -2px (向上)

分组标题:
  上边距: 8px (第一个分组除外)

任务列表:
  外边距: 8px (左右), 0 (上), 8px (下)
  最大高度: 400px

任务条目:
  内边距: 10px 8px
  间距: 2px (上下)
  边框圆角: 6px

状态指示器:
  尺寸: 6px × 6px
  形状: 圆形

任务名称:
  字体大小: 13px
  字重: 500

时间信息:
  字体大小: 11px

快捷入口:
  内边距: 10px 8px
  字体大小: 13px
  字重: 500
  边框圆角: 6px
  上边距: 8px

滚动条宽度: 4px
```

## 📱 响应式设计

### 桌面端（≥ 993px）
- ✅ 完整显示近期任务列表
- ✅ 显示所有十条任务
- ✅ 显示"查看全部任务记录"入口
- ✅ 支持滚动查看更多

### 平板/移动端（≤ 992px）
- ❌ 隐藏任务列表
- ❌ 隐藏"查看全部"入口
- ✅ 只保留"对话"导航项

## 💻 技术实现

### HTML 结构

```html
<aside class="agent-sidebar">
    <nav class="agent-nav">
        <!-- 新对话按钮 -->
        <button class="btn-new-chat">
            <span class="btn-icon">✨</span>
            <span class="btn-text">新对话</span>
        </button>

        <!-- 近期任务 -->
        <div class="nav-group">
            <div class="nav-group-title">近期任务</div>

            <!-- 近期任务列表 -->
            <div class="recent-tasks-list">
                <a href="agent-detail-tasks.html" class="recent-task-item">
                    <div class="task-indicator running"></div>
                    <div class="task-info">
                        <div class="task-name">Laravel项目安全审计</div>
                        <div class="task-time">2小时前</div>
                    </div>
                </a>
                <!-- 更多任务... -->
            </div>

            <!-- 查看全部入口 -->
            <a href="agent-detail-tasks.html" class="view-all-tasks">
                查看全部任务记录 →
            </a>
        </div>
    </nav>
</aside>
```

### CSS 关键样式

```css
/* 新对话按钮 */
.btn-new-chat {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    width: calc(100% - 32px);
    margin: 0 16px 16px 16px;
    padding: 12px 16px;
    background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
    color: #ffffff;
    border: none;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(79, 70, 229, 0.4);
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
}

.btn-new-chat:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(79, 70, 229, 0.5);
    background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
}

.btn-new-chat .btn-icon {
    font-size: 18px;
    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.2));
}

.btn-new-chat .btn-text {
    font-size: 14px;
    font-weight: 700;
    letter-spacing: 0.3px;
}

/* 近期任务列表 */
.recent-tasks-list {
    margin: 8px 8px 0 8px;
    max-height: 400px;
    overflow-y: auto;
}

/* 任务条目 */
.recent-task-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 8px;
    border-radius: 6px;
    transition: background 0.2s;
}

.recent-task-item:hover {
    background: #f5f5f5;
}

/* 状态指示器 */
.task-indicator {
    width: 6px;
    height: 6px;
    border-radius: 50%;
}

.task-indicator.running { background: #fa8c16; }
.task-indicator.completed { background: #52c41a; }
.task-indicator.failed { background: #ff4d4f; }

/* 快捷入口 */
.view-all-tasks {
    display: block;
    text-align: center;
    padding: 10px 8px;
    margin-top: 8px;
    background: #f0f7ff;
    border-radius: 6px;
}
```

### JavaScript 交互

**新对话按钮点击事件**：

```javascript
const btnNewChat = document.querySelector('.btn-new-chat');
if (btnNewChat) {
    btnNewChat.addEventListener('click', function() {
        // 跳转到空状态页面（新对话）
        window.location.href = 'agent-detail-empty.html';
    });
}
```

**任务项点击统计**（可选）：

```javascript
// 任务项点击统计
document.querySelectorAll('.recent-task-item').forEach((item, index) => {
    item.addEventListener('click', function() {
        console.log(`点击了任务 #${index + 1}`);
        // 发送统计数据
    });
});
```

## 📄 相关文件

### HTML 文件
- `frontend/agent-detail-empty.html` - 空状态页（包含近期任务列表）
- `frontend/agent-detail-chat.html` - 对话页（包含近期任务列表）

### CSS 文件
- `frontend/css/agent-detail.css` - 近期任务列表样式（第217-355行）

### JavaScript 文件
- `frontend/js/agent-detail.js` - 暂无相关代码（纯CSS实现）

## 🔍 使用场景

### 场景1：快速查看近期任务
用户打开智能体详情页，立即在侧导航中看到近十条任务，无需额外点击或悬停。

### 场景2：快速跳转到任务详情
用户看到感兴趣的任务，点击任务项直接进入全部任务记录页面，可以查看该任务的详细信息。

### 场景3：查看所有任务
用户想查看所有任务记录，点击底部的"查看全部任务记录 →"快捷入口，直接进入任务管理页面。

### 场景4：任务状态监控
用户通过彩色圆点快速识别任务状态：进行中的任务（橙色）、已完成的任务（绿色）、失败的任务（红色）。

## ✅ 优势特点

1. **即时可见**：无需点击或悬停，打开页面即可看到
2. **简洁明了**：使用彩色圆点表示状态，信息密度适中
3. **快速访问**：点击任务项或快捷入口直接跳转
4. **性能优化**：纯CSS实现，无需JavaScript
5. **响应式**：移动端自动隐藏列表，避免占用空间
6. **视觉统一**：与整体设计风格保持一致

## 🚀 未来扩展

### 可能的改进方向

1. **动态加载**：从API获取真实的近期任务数据
2. **筛选功能**：添加按状态筛选（仅显示进行中/已完成/失败）
3. **刷新功能**：添加手动刷新按钮，实时更新任务列表
4. **时间范围**：允许切换显示不同时间范围的任务（近7天/近30天）
5. **快捷操作**：悬停时显示快捷操作按钮（继续/暂停/删除）
6. **展开/收起**：添加展开/收起功能，节省空间
7. **拖拽排序**：允许用户拖拽任务调整显示顺序
8. **任务分组**：按日期或状态分组显示任务

## 📞 相关文档

- [前端UI框架布局设计方案](./前端UI框架布局设计方案.md)
- [UI模板访问指南](./UI模板访问指南.md)

---

**创建时间**：2024-12-09
**最后更新**：2024-12-09
**功能状态**：✅ 已实现并测试
**版本说明**：v3.1 - 优化"新对话"按钮文字可读性，更换为更亮的渐变色系并添加文字阴影效果
